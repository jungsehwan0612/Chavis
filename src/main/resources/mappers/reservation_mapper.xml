<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reservationMapper">

	<!-- CREATE -->
	<insert id="addReservation" parameterType="map">
		/* reservationMapper.addReservation */
		INSERT INTO
		RESERVATION (RESERVATION_NO, BODYSHOP_NO, MEMBER_NO, KEY,
		RESERVATION_TIME, REPAIRED_TIME)
		VALUES ((select
		nvl(max(reservation_no),0)+1 from reservation), #{bodyshop_no},
		(select member_no from member where member_id = #{member_id}), #{key},
		#{reservation_time}, #{repaired_time})
	</insert>

	<!-- getReservationByBodyshopNo -->
	<select id="getReservationByBodyshopNo" resultType="ReservationVO">
		SELECT * 
		FROM RESERVATION
		WHERE BODYSHOP_NO = #{bodyshop_no}
	</select>

	<!-- ListByID -->
	<select id="listReservationByID" parameterType="String"
		resultType="ReservationVO">
		/* reservationMapper.listReservaitonByID */
		SELECT reservation.reservation_time, member.member_mname,
		reservation.key,
		reservation.repaired_person, reservation.repaired_time
		FROM reservation
		JOIN member
		ON
		reservation.member_no = member.member_no
		WHERE member.member_id = #{member_id}
	</select>

</mapper>